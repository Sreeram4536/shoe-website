<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css">
	<style>
        body {
            background-color: #dfe1e3; /* Light grey background */
        }
        .form-check-label {
            font-size: 1rem;
        }
        .form-check-input {
            accent-color: #007bff; /* Bootstrap's primary blue for better visibility */
        }
        .table-bordered {
            background-color: #ffffff; /* Ensure table is on a white background for clarity */
        }
    </style>
</head>
<body>
    <script type="application/x-javascript">
		addEventListener("load", function () {
			setTimeout(hideURLbar, 0);
		}, false);

		function hideURLbar() {
			window.scrollTo(0, 1);
		}
	</script>
	<!-- //custom-theme -->
	<link href="/css/bootstrap.css" rel="stylesheet" type="text/css" media="all" />
	<link rel="stylesheet" href="/css/shop.css" type="text/css" media="screen" property="" />
	<link href="/css/style7.css" rel="stylesheet" type="text/css" media="all" />
	<!-- Owl-carousel-CSS -->
	<link rel="stylesheet" type="text/css" href="/css/jquery-ui1.css">
	<link href="/css/style.css" rel="stylesheet" type="text/css" media="all" />
	<!-- font-awesome-icons -->
	<link href="/css/font-awesome.css" rel="stylesheet">
	<!-- //font-awesome-icons -->
	<link href="//fonts.googleapis.com/css?family=Montserrat:100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800"
	    rel="stylesheet">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800" rel="stylesheet">

	<style>
	.price-button {
		padding: 12px 20px;
		background-color: #f1f1f1;
		color: #333;
		border: 1px solid #ddd;
		border-radius: 30px;
		cursor: pointer;
		transition: background-color 0.3s, transform 0.2s;
		text-align: center;
		font-size: 14px;
	  }
	 
	 
	  .price-button:hover {
		background-color: #007bff;
		color: white;
		transform: scale(1.05);
	  }
	 
	 
	  .price-button:active {
		transform: scale(0.95);
	  }
	  /* .category-brand-container {
   text-align: center;
 } */
	  </style>
</head>

<body>
	<!-- banner -->
<div class="banner_top innerpage" id="home">
		<div class="wrapper_top_w3layouts">
			<div class="header_agileits">
				<div class="logo inner_page_log">
					<h1><a class="navbar-brand" href="index.html"><span>Downy</span> <i>Shoes</i></a></h1>
				</div>
				<div class="overlay overlay-contentpush">
					<button type="button" class="overlay-close"><i class="fa fa-times" aria-hidden="true"></i></button>

					<nav>
						<ul>
							<li><a href="/" class="active">Home</a></li>
							<li><a href="about.html">About</a></li>
							<li><a href="/user/shop">Shop Now</a></li>
							<li><a href="contact.html">Contact</a></li>
							
							
								<% if ((session && session.user) || (session && session.google)) { %>
									<li><a href="/user/cart">Cart</a></li>
									<li><a href="user/userProfile">Profile</a></li>
									<li><a href="user/logout">Logout</a></li>
								<% } else { %>
									<li><a href="user/signup">Signup</a></li>
									<li><a href="user/login">Login</a></li>
								<% } %>
						</ul>
					</nav>
				</div>
				<div class="mobile-nav-button">
					<button id="trigger-overlay" type="button"><i class="fa fa-bars" aria-hidden="true"></i></button>
				</div>
				<!-- cart details -->
				<div class="top_nav_right">
					<div class="shoecart shoecart2 cart cart box_1">
						<form action="#" method="post" class="last">
							<input type="hidden" name="cmd" value="_cart">
							<input type="hidden" name="display" value="1">
							<button class="top_shoe_cart" type="submit" name="submit" value=""><i class="fa fa-cart-arrow-down" aria-hidden="true"></i></button>
						</form>
					</div>
				</div>
			</div>
		</div>
		<!-- //cart details -->
		<!-- search -->
		<div class="search_w3ls_agileinfo">
			<div class="cd-main-header">
				<ul class="cd-header-buttons">
					<li><a class="cd-search-trigger" href="#cd-search"> <span></span></a></li>
				</ul>
			</div>
			<div id="cd-search" class="cd-search">
				<form action="#" method="post">
					<input name="Search" type="search" placeholder="Click enter after typing...">
				</form>
			</div>
		</div>
		<!-- //search -->
		<div class="clearfix"></div>
		<!-- /banner_inner -->
		<div class="services-breadcrumb_w3ls_agileinfo">
			<div class="inner_breadcrumb_agileits_w3">

				<ul class="short">
					<li><a href="index.html">Home</a><i>|</i></li>
					<li>Shop</li>
				</ul>
			</div>
		</div>
		<!-- //banner_inner -->
	</div>
	<div class="container py-5">
		<div class="row justify-content-center">
			<div class="col-12 col-lg-10">
				<!-- Page Title -->
				<div class="mb-4">
					<h2 class="fw-bold">Checkout</h2>
					<nav aria-label="breadcrumb">
						<ol class="breadcrumb">
							<li class="breadcrumb-item"><a href="/user/cart">Cart</a></li>
							<li class="breadcrumb-item active">Checkout</li>
						</ol>
					</nav>
				</div>
	
				<!-- Cart Summary Card -->
				<div class="card shadow-sm mb-4">
					<div class="card-header bg-white">
						<h5 class="mb-0">Order Summary</h5>
					</div>
					<div class="card-body">
						<div class="table-responsive">
							<table class="table table-hover">
								<thead class="table-light">
									<tr>
										<th>Product</th>
										<th>Details</th>
										<th class="text-end">Total</th>
									</tr>
								</thead>
								<tbody>
									<% cartItems.forEach(item => { %>
									<tr>
										<td style="width: 100px;">
											<img src="/uploads/product-images/<%= item.productId.productImage[0] %>" 
												 alt="<%= item.productId.productName %>"
												 class="img-fluid rounded">
										</td>
										<td>
											<h6 class="mb-0"><%= item.productId.productName %></h6>
											<small class="text-muted">
												Quantity: <%= item.quantity %> Ã— â‚¹<%= item.productId.salePrice %>
											</small>
										</td>
										<td class="text-end">â‚¹<%= item.totalPrice %></td>
									</tr>
									<% }) %>
									<tr class="fw-bold">
										<td colspan="2">Total Amount</td>
										<td class="text-end">â‚¹<%= totalAmount %></td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
	
				<!-- Address Selection Card -->
				<div class="card shadow-sm">
					<div class="card-header bg-white d-flex justify-content-between align-items-center">
						<h5 class="mb-0">Shipping Address</h5>
						<a href="/user/userProfile" class="btn btn-outline-primary btn-sm">
							<i class="fa fa-edit"></i> Edit Addresses
						</a>
					</div>
					<div class="card-body">
						<% if (addresses.length > 0) { %>
							<form action="/user/payment" method="POST">
								<div class="row g-3">
									<% addresses.forEach((addr, index) => { %>
									<div class="col-12 col-md-6">
										<div class="card h-100">
											<div class="card-body">
												<div class="form-check">
													<input class="form-check-input" type="radio" 
														   name="chosenAddress" id="address<%= index %>" 
														   value="<%= addr._id %>" required>
													<label class="form-check-label w-100" for="address<%= index %>">
														<strong><%= addr.name %></strong>
														<span class="badge bg-secondary ms-2"><%= addr.addressType %></span>
														<p class="mb-1 mt-2">
															<%= addr.city %>, <%= addr.state %>, <%= addr.pincode %>
														</p>
														<small class="text-muted">
															ðŸ“ž <%= addr.phone %> / <%= addr.altPhone %>
														</small>
													</label>
												</div>
											</div>
										</div>
									</div>
									<% }) %>
								</div>
								<div class="mt-4">
									<button type="submit" class="btn btn-primary btn-lg w-100">
										Proceed to Payment
									</button>
								</div>
							</form>
						<% } else { %>
							<div class="text-center py-4">
								<p class="mb-3">No addresses available.</p>
								<a href="/user/userProfile" class="btn btn-primary">
									Add New Address
								</a>
							</div>
						<% } %>
					</div>
				</div>
			</div>
		</div>
	</div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>

    <%- include("../partials/user/footer") %>
</body>
</html>
